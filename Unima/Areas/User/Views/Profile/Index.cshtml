@using Unima.Areas.User.Models.ViewModels
@using Unima.Dal.Enums
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@model ProfileViewModel
@{
    Layout = "/Areas/User/Views/Shared/_Layout.cshtml";
    <link rel="stylesheet" href="/css/Profile.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/i18n/fa.js"></script> -->

    <script src="/js/Profile.js"></script>
}

<section class="Setting align-items-center">
    <div class="Section-Personal row">
        <div class="Section-title col-xl-12 pb-2 Section-title justify-content-center align-item-center">
            <p class="m-0 fs-5">
                اطلاعات شخصی
            </p>
        </div>
        <div class="Section-Card p-5 m-1 bg-white rounded col-xl-11 col-md-12 d-flex justify-content-center flex-wrap m-auto">
            <div class="row">
                <div class="border-bottom border-secondary col-sm-9 col-md-11 col-lg-5 m-4">
                    <label asp-for="ProfileModel.FullName" class="fs-5 d-inline-block text-secondary mb-2"></label>
                    <div class="w-100 d-flex justify-content-between align-items-center" dir="rtl">
                        <div>
                            <span id="FullNameSpan" class="fs-6">@Model.ProfileModel.FullName</span>
                        </div>
                        <div class="icon-edit">
                            <a href="#" data-bs-toggle="modal" data-bs-target="#UpdateFullName">
                                <i class="fa-solid fa-pen-to-square fs-6 text-black "></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="border-bottom border-secondary col-sm-9 col-md-11 col-lg-5 m-4">
                    <label asp-for="ProfileModel.Email" class="fs-5 d-inline-block text-secondary mb-2"></label>
                    <div class="w-100 d-flex justify-content-between align-items-center" dir="rtl">
                        <div>
                            <span id="EmailSpan" class="fs-6">@Model.ProfileModel.Email</span>
                        </div>
                        <div class="icon-edit">
                            <a href="#" data-bs-toggle="modal" data-bs-target="#UpdateEmail">
                                <i class="fa-solid fa-pen-to-square fs-6 text-black"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="border-bottom border-secondary col-sm-9 col-md-11 col-lg-5 m-4">
                    <label asp-for="ProfileModel.PhoneNumber" class="fs-5 d-inline-block text-secondary mb-2"></label>
                    <div class="w-100 d-flex justify-content-between align-items-center" dir="rtl">
                        <div>
                            <span id="PhoneNumberSpan" class="fs-6">@Model.ProfileModel.PhoneNumber</span>
                        </div>
                        <div class="icon-edit">
                            <a href="#" data-bs-toggle="modal" data-bs-target="#UpdatePhoneNumber">
                                <i class="fa-solid fa-pen-to-square fs-6 text-black"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="border-bottom border-secondary col-sm-9 col-md-11 col-lg-5 m-4">
                    <label asp-for="ProfileModel.Username" class="fs-5 d-inline-block text-secondary mb-2"></label>
                    <div class="w-100 d-flex justify-content-between align-items-center" dir="rtl">
                        <div>
                            <span id="UsernameSpan" class="fs-6 StudentCodeNumber">@Model.ProfileModel.Username</span>
                        </div>
                        <div class="icon-edit">
                            <a href="#" data-bs-toggle="modal" data-bs-target="#UpdateStudentInformation">
                                <i class="fa-solid fa-pen-to-square fs-6 text-black"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="border-bottom border-secondary col-sm-9 col-md-11 col-lg-5 m-4">
                    <label for="name" class=" fs-5 d-inline-block text-secondary mb-2">رمزعبور</label>
                    <div class="w-100 d-flex justify-content-between align-items-center" dir="rtl">
                        <div>
                            <span class="fs-6">*********</span>
                        </div>
                        <div class="icon-edit">
                            <a href="#" data-bs-toggle="modal" data-bs-target="#UpdatePassword">
                                <i class="fa-solid fa-pen-to-square fs-6 text-black"></i>
                            </a>
                        </div>
                    </div>
                    <div style="display: none;" class="success-password text-danger"></div>
                </div>
                <div class="border-bottom border-secondary col-sm-9 col-md-11 col-lg-5 m-4">
                    <label asp-for="ProfileModel.SelfServicePassword" class="fs-5 d-inline-block text-secondary mb-2"></label>
                    <div class="w-100 d-flex justify-content-between align-items-center" dir="rtl">
                        <div>
                            <span id="SelfPasswordSpan" class="fs-6">@Model.ProfileModel.SelfServicePassword</span>
                        </div>
                        <div class="icon-edit">
                            <a href="#" data-bs-toggle="modal" data-bs-target="#UpdateStudentInformation" id="FillInput" data-value="@Model.ProfileModel.Username">
                                <i class="fa-solid fa-pen-to-square fs-6 text-black"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="border-bottom border-secondary col-sm-9 col-md-11 col-lg-5 m-4">
                    <label class="fs-5 d-inline-block text-secondary mb-2">جنسیت</label>
                    <div class="w-100 d-flex justify-content-between align-items-center" dir="rtl">
                        <div>
                            <span id="GenderSpan" class="fs-6">@Model.ProfileModel.Gender</span>
                        </div>
                        <div class="icon-edit">
                            <a href="#" data-bs-toggle="modal" data-bs-target="#UpdatePersonalInformation"
                               onclick="getGenderData()">
                                <i class="fa-solid fa-pen-to-square fs-6 text-black" onclick="getGenderData()"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="border-bottom border-secondary col-sm-9 col-md-11 col-lg-5 m-4">
                    <label class="fs-5 d-inline-block text-secondary mb-2">سلف پیش‌فرض</label>
                    <div class="w-100 d-flex justify-content-between align-items-center" dir="rtl">
                        <div>
                            <span id="DefaultSelfLocationSpan"
                                  class="fs-6">@Model.ProfileModel.DefaultSelfService</span>
                        </div>
                        <div class="icon-edit">
                            <a href="#" data-bs-toggle="modal" data-bs-target="#UpdatePersonalInformation">
                                <i class="fa-solid fa-pen-to-square fs-6 text-black"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="border-bottom border-secondary col-sm-9 col-md-11 col-lg-5 m-4">
                    <label class="fs-5 d-inline-block text-secondary mb-2">تنظیم برنامه کلاسی</label>
                    <div class="w-100 d-flex justify-content-between align-items-center" dir="rtl">
                        <div>
                            <span id="DefaultSelfLocationSpan"
                                  class="fs-6">ثبت نشده</span>
                        </div>
                        <div class="icon-edit">
                            <a href="#" data-bs-toggle="modal" data-bs-target="#scheduleModal" id="openScheduleBtn">
                                <i class="fa-solid fa-pen-to-square fs-6 text-black"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="border-bottom border-secondary col-sm-9 col-md-11 col-lg-5 m-4">
                    <label class="fs-5 d-inline-block text-secondary mb-2">مدیریت مکان ها</label>
                    <div class="w-100 d-flex justify-content-between align-items-center" dir="rtl">
                        <div>
                            <span id="DefaultSelfLocationSpan"
                                  class="fs-6">ثبت نشده</span>
                        </div>
                        <div class="icon-edit">
                            <a href="#" data-bs-toggle="modal" data-bs-target="#locationsListModal">
                                <i class="fa-solid fa-pen-to-square fs-6 text-black"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="border-bottom border-secondary col-sm-9 col-md-11 col-lg-5 m-4">
                    <label class="fs-5 d-inline-block text-secondary mb-2">مدیریت لیست دروس</label>
                    <div class="w-100 d-flex justify-content-between align-items-center" dir="rtl">
                        <div>
                            <span id="DefaultSelfLocationSpan"
                                  class="fs-6">ثبت نشده</span>
                        </div>
                        <div class="icon-edit">
                            <a href="#" data-bs-toggle="modal" data-bs-target="#coursesListModal">
                                <i class="fa-solid fa-pen-to-square fs-6 text-black"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    @* MODALS *@
    <div class="modal fade" id="UpdateFullName" tabindex="-1" aria-labelledby="exampleModalCenterTitle"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-light">
                <div class="modal-header">
                    <div class="modal-header-content">
                        <i class="fa-solid fa-user m-1 fs-6"></i>
                        <span class="fs-6 m-1 w-100">اطلاعات شخصی</span>
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="close-tab"></button>
                </div>
                <div class="modal-body d-flex flex-column m-2 fs-7">
                    <p>
                        لطفا اطلاعات شناسایی خود را وارد کنید. <br> نام ‌و نام‌خانوادگی شما باید با اطلاعات سامانه
                        پویا
                        همخوانی داشته باشد.
                    </p>
                    <div novalidate>
                        @* <div class="m-2 w-50">
                            <label for="FullName" class="fs-6 mb-2">نام و نام‌خانوادگی</label>
                            <input type="text" class="form-control bg-light w-100" id="FullName" required>
                        </div> *@
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="FullName" placeholder="نام‌ونام‌خانوادگی" required>
                            <label for="FullName">نام‌ و نام‌خانوادگی</label>
                            <div class="form-text text-danger mt-1" id="FullNameError" style="display: none;"></div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-modal-id="FullName" id="SubmitBtnName">
                        ذخیره
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="UpdateEmail" tabindex="-1" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered ">
            <div class="modal-content bg-light" style="z-index: 30;">
                <div class="modal-header">
                    <div class="modal-header-content">
                        <i class="fa-solid fa-envelope m-1 fs-6"></i>
                        <span class="fs-6 m-1 w-100">ایمیل</span>
                    </div>
                    <button type="button" class="btn-close " data-bs-dismiss="modal" aria-label="close-tab"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="d-flex flex-wrap justify-content-between">
                            <div class="w-100">
                                @* <label for="Email" class="form-label fs-6">ایمیل خود را وارد کنید.</label>
                                <div class="mb-3 d-flex align-items-center w-75">
                                    <input type="email" class="form-control bg-light border border-1 border-dark"
                                        id="Email" dir="ltr" placeholder="example@email.com">
                                </div> *@
                                <div class="form-floating mb-3">
                                    <input type="email" class="form-control" id="Email" placeholder="example@gmail.com" dir="rtl" required>
                                    <label for="Email">ایمیل خود را وارد کنید</label>
                                </div>
                                <div class="form-text text-danger fs-7" id="EmailError" style="display: none;">
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-modal-id="Email" id="SubmitBtnEmail">ذخیره</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="UpdatePhoneNumber" tabindex="-1" aria-labelledby="exampleModalCenterTitle"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered ">
            <div class="modal-content bg-light">
                <div class="modal-header">
                    <div class="modal-header-content">
                        <i class="fa-solid fa-phone-flip m-1 fs-6"></i>
                        <span class="fs-6 m-1 w-100">تغییر شماره موبایل</span>
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="close-tab"></button>
                </div>
                <div class="modal-body">
                    <div class="step-indicator">
                        <div class="step active" id="step-indicator-1">
                            1
                            <div class="step-text">شماره موبایل</div>
                        </div>
                        <div class="step" id="step-indicator-2">
                            2
                            <div class="step-text">کد تایید</div>
                        </div>
                        <div class="step" id="step-indicator-3">
                            3
                            <div class="step-text">اتمام</div>
                        </div>
                    </div>

                    <form id="step-1">
                        <div class="my-5">
                            @* <div class="w-100">
                                    <input type="tel" class="form-control bg-light border border-1 border-dark"
                                        id="PhoneNumber" placeholder="09123456789" maxlength="11">
                                </div>
                                 *@
                            <div class="form-floating mb-3">
                                <input type="tel" class="form-control" id="PhoneNumber" placeholder="شماره خود را وارد کنید." maxlength="11" dir="rtl" required>
                                <label for="PhoneNumber"> شماره خود را وارد کنید.</label>
                                <div class="form-text text-danger fs-7" id="PhoneNumberError" style="display: none;"></div>
                            </div>
                        </div>
                        <div class="d-grid gap-2">
                            <button class="btn btn-primary submitCode" id="sendCodeBtn">ارسال کد تأیید</button>
                        </div>
                    </form>
                    <form id="step-2" style="display:none;">
                        <div class="verification-info">
                            <i class="fas fa-info-circle"></i>
                            <div>
                                <span>کد تأیید به شماره </span>
                                <strong id="PhoneNumberDisplay">09123456789</strong>
                                <span> ارسال گردید</span>
                                <div class="timer text-danger">
                                    زمان باقیمانده: <span id="countdown">01:00</span>
                                </div>
                            </div>
                        </div>
                        <div class="my-3">
                            <div>
                                @* <input type="text" class="form-control border border-1 border-dark"
                                        id="VerificationCode" placeholder="کد ۶ رقمی" maxlength="6"> *@
                                <div class="form-floating mb-3">
                                    <input type="text" class="form-control" id="VerificationCode" placeholder="کد تایید" maxlength="6" dir="rtl" required>
                                    <label for="VerificationCode">کد تایید</label>
                                </div>
                                <div class="form-text text-danger fs-7" id="VerificationCodeError" style="display: none;"></div>
                            </div>
                        </div>
                        <div class="text-center mb-3">
                            @* <span class="resend-link" id="ResendCode">ارسال مجدد کد</span> *@
                        </div>

                        <div class="d-grid gap-2 mt-4">
                            <button class="btn btn-primary submitCode" id="VerifyCodeBtn">تأیید کد</button>
                        </div>
                    </form>
                    <form id="step-3" style="display:none;">
                        <div class="success-message">
                            <i class="fas fa-check-circle"></i>
                            <h5 class="mb-3">شماره موبایل با موفقیت تغییر یافت</h5>
                            <div class="phone-display" id="FinalPhoneDisplay">09123456789</div>
                            <p class="text-muted">شماره موبایل شما با موفقیت به روزرسانی شد</p>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">بستن</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="UpdateStudentInformation" tabindex="-1" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-light">
                <div class="modal-header position-relative">
                    <div class="modal-header-content">
                        <i class="fa-solid fa-circle-info m-1 fs-6"></i>
                        <span class="fs-6 m-1 w-100">اطلاعات دانشجویی</span>
                    </div>
                    <button type="button" class="btn-close position-absolute" data-bs-dismiss="modal" aria-label="close-tab"></button>
                </div>
                <div class="modal-body d-flex flex-column m-2 fs-7">
                    <p class="m-2">
                        لطفا اطلاعات خواسته شده را دقیق وارد کنید.<br>
                        سامانه یونیما هیچ مسئولیتی در قبال اطلاعات نادرست نمیپذیرد.
                    </p>
                    <div id="StudentForm my-2" class="d-flex flex-nowrap justify-content-between">
                        <div class="m-2 w-50">
                            @* <label for="StudentCode" class="fs-6 mb-2">شماره‌ دانشجویی</label>
                            <input type="text" id="StudentCode"
                                class="form-control bg-light w-100 border border-1 border-dark" maxlength="10"
                                inputmode="numeric" required> *@
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" inputmode="numeric" id="Username" placeholder="شماره دانشجویی" maxlength="10" dir="rtl" required>
                                <label for="StudentCode">شماره دانشجویی</label>
                                <div id="StudentInformationError" class="text-danger mt-1" style="display: none;"></div>
                            </div>
                        </div>
                        <div class="m-2 w-50">
                            @* <label for="SelfPassword" class="mb-2 fs-6">رمز سلف دانشجویی</label>
                            <input type="text" id="SelfPassword"
                                class="form-control bg-light w-100 border border-1 border-dark" required> *@
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="SelfPassword" placeholder="رمز سلف دانشجویی" dir="rtl" required>
                                <label for="SelfPassword">رمز سلف دانشجویی</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" id="submitStudentInformation" data-modal-id="StudentInformation">ذخیره</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="UpdatePassword" tabindex="-1" aria-labelledby="exampleModalCenterTitle"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered ">
            <div class="modal-content bg-light" style="width: 85% !important;">
                <div class="modal-header">
                    <div class="modal-header-content">
                        <i class="fa-solid fa-unlock-keyhole m-1 fs-6"></i>
                        <span class="fs-6 m-1 w-100">رمز عبور</span>
                    </div>
                    <button type="button" class="btn-close text-white" data-bs-dismiss="modal"
                            aria-label="close-tab"></button>
                </div>
                <div class="modal-body">
                    <form id="ChangePasswordForm" novalidate>
                        <div class="form-floating mb-3 password-wrapper">
                            <input type="text" class="form-control" id="CurrentPassword" placeholder="رمزعبور فعلی"
                                   required>
                            <label for="CurrentPassword">رمز عبور فعلی</label>
                            <i class="fa-solid fa-eye toggle-password" data-target="CurrentPassword"></i>
                        </div>
                        <div class="form-floating mb-3 password-wrapper">
                            <input type="text" class="form-control" id="NewPassword" placeholder="رمزعبور جدید"
                                   required>
                            <label for="NewPassword">رمز عبور جدید</label>
                            <i class="fa-solid fa-eye toggle-password" data-target="NewPassword"></i>
                        </div>
                        <div class="form-floating mb-3 password-wrapper">
                            <input type="text" class="form-control" id="ConfirmNewPassword"
                                   placeholder="تکرار رمز عبور جدید" required>
                            <label for="ConfirmNewPassword">تکرار رمز عبور</label>
                            <i class="fa-solid fa-eye toggle-password" data-target="ConfirmNewPassword"></i>
                        </div>
                        <div class="invalid-feedback mt-1">رمزهای جدید با هم مطابقت ندارند.</div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-modal-id="Password">ذخیره</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="UpdatePersonalInformation" tabindex="-1" aria-labelledby="exampleModalCenterTitle"
         aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-light">
                <div class="modal-header">
                    <div class="modal-header-content">
                        <i class="fa-solid fa-person-half-dress m-1 fs-5"></i>
                        <span class="fs-6 m-1 w-100">اطلاعات‌ فردی</span>
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="close-tab"></button>
                </div>
                <div class="modal-body text-center">
                    <div class="row justify-content-center mb-4" id="GenderContainer">
                        <h6 class="mb-3 text-end">جنسیت خود را وارد کنید:</h6>
                    </div>
                    <div class="d-none" row" id="MaleSelfContainer">
                        <h6 class="mb-3 text-end">سلف پیش‌فرض (مرد):</h6>
                        <div class="d-flex flex-wrap justify-content-center gap-2 mb-4" id="MaleSelfOption">
                        </div>
                    </div>
                    <div class="d-none" id="FemaleSelfContainer">
                        <h6 class="mb-3 text-end">سلف پیش‌فرض (زن):</h6>
                        <div class="d-flex flex-wrap justify-content-center gap-2 mb-4" id="FemaleSelfOption">
                        </div>
                    </div>
                    <input type="hidden" id="DefaultSelfLocation" value="" data="data-TextValue">
                    <input type="hidden" id="Gender" value="" data="data-TextValue">
                    <div id="ErrorGender" class="d-none text-end text-danger mt-3"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-modal-id="UpdatePersonalInformation"
                            id="SubmitBtnGender">
                        ذخیره
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="scheduleModal" tabindex="-1" aria-labelledby="scheduleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-header-content">
                        <i class="fa-solid fa-calendar-days m-1 fs-6"></i>
                        <span class="fs-6 m-1 w-100">برنامه کلاسی</span>
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="checkboxes">
                            <div class="checkbox-container">
                                <input type="checkbox" id="evenWeekCheck" class="schedule-filter" checked>
                                <label for="evenWeekCheck" class="label-even">
                                    <span class="custom-checkbox">
                                        <i class="fa-solid fa-check"></i>
                                    </span>
                                    هفته زوج
                                </label>
                            </div>

                            <div class="checkbox-container">
                                <input type="checkbox" id="oddWeekCheck" class="schedule-filter" checked>
                                <label for="oddWeekCheck" class="label-odd">
                                    <span class="custom-checkbox">
                                        <i class="fa-solid fa-check"></i>
                                    </span>
                                    هفته فرد
                                </label>
                            </div>
                    </div>
                    <div class="table-responsive">
                        <table id="scheduleTable" class="scheduleTable table-bordered">
                            <thead>
                                <tr>
                                    <th>روز / ساعت</th>
                                    <th>06:00 - 08:00</th>
                                    <th>08:00 - 10:00</th>
                                    <th>10:00 - 12:00</th>
                                    <th>12:00 - 14:00</th>
                                    <th>14:00 - 16:00</th>
                                    <th>16:00 - 18:00</th>
                                    <th>18:00 - 20:00</th>
                                    <th>20:00 - 22:00</th>
                                </tr>
                            </thead>
                            <tbody id="scheduleTableBody"></tbody>
                        </table>
                    </div>
                    <div class="text-start mt-4 border-top pt-3">
                        <button id="exportPngBtn" class="btn btn-export mx-1">
                            <i class="fa-solid fa-image ms-2"></i>خروجی PNG
                        </button>
                        <button id="exportPdfBtn" class="btn btn-export mx-1">
                            <i class="fa-solid fa-file-pdf ms-2"></i>خروجی PDF
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="classFormModal" tabindex="-1" aria-labelledby="classFormModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="classFormModalLabel">افزودن/ویرایش کلاس</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="classForm" novalidate>
                        <div class="mb-3">
                            <label for="course-name" class="form-label">نام درس</label>
                            <select class="form-select" id="course-name" required></select>
                        </div>
                        <div class="mb-3">
                            <label for="faculty-input" class="form-label">
                                دانشکده 
                                <br><small>(در صورتی که درس در دانشکده دیگری بجز دانشکده های تعریف شده برگزار می‌شود، این فیلد را پر کنید.)</small>
                            </label>
                            <input class="form-control" list="faculty-options" id="faculty-input" placeholder="نام دانشکده را وارد یا انتخاب کنید...">

                            <datalist id="faculty-options">
                                @if (Model.Faculties is not null)
                                {
                                    foreach (var faculty in Model.Faculties)
                                    {
                                        <option value="@faculty"></option>
                                    }
                                }
                            </datalist>
                            <div class="invalid-feedback"> نام مکان را وارد کنید.</div>
                        </div>
                        <div class="mb-3">
                            <label for="class-number" class="form-label">شماره کلاس</label>
                            <input type="number" class="form-control" id="class-number" required>
                            <div class="invalid-feedback"> نام مکان را وارد کنید.</div>
                        </div>
                        <div class="mb-3">
                            <label for="week-type" class="form-label">نوع هفته</label>
                            <select class="form-select" id="week-type" required>
                                <option value="ثابت">ثابت</option>
                                <option value="زوج">زوج</option>
                                <option value="فرد">فرد</option>
                            </select>
                        </div>
                        <div class="invalid-feedback fs-7 mb-1"></div>
                        <button type="submit" class="btn btn-primary w-100 submitCode">ثبت</button>
                        <button type="button" class="btn btn-danger w-100 mt-2 submitCode" id="deleteClassBtn" style="display:none; background-color:#d9534f !important; color:white !important; ">حذف</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="coursesListModal" tabindex="-1" aria-labelledby="coursesListModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-header-content">
                        <i class="fa-solid fa-calendar-days m-1 fs-6"></i>
                        <span class="fs-6 m-1 w-100">لیست دروس</span>
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <button id="addCourseBtn" class="btn w-100 submitCode text-center"><i class="fa-solid fa-plus ms-1"></i>افزودن درس جدید</button>
                    <div class="table-responsive pt-3">
                        <table class="table table-striped table-hover">
                            <thead class="text-center">
                                <tr>
                                    <th scope="col">نام درس</th>
                                    <th scope="col">کد درس</th>
                                    <th scope="col">گروه</th>
                                    <th scope="col" class="text-center">عملیات</th>
                                </tr>
                            </thead>
                            <tbody id="coursesTableBody">
                                @if (Model.Lessons is not null)
                                {
                                    foreach (var lesson in Model.Lessons)
                                    {
                                        <tr data-course-Id="@lesson.No@lesson.GroupNo" data-department-Id="@lesson.DepartmentId">
                                            <td>@lesson.Title</td>
                                            <td>@lesson.No</td>
                                            <td>@lesson.GroupNo</td>
                                            <td class="text-center">
                                                <a href="#" class="text-primary mx-2 edit-btn" title="ویرایش"><i class="fa-solid fa-pen-to-square"></i></a>
                                                <a href="#" class="text-danger mx-2 delete-btn" title="حذف"><i class="fa-solid fa-trash-can"></i></a>
                                            </td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">بستن</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="courseFormModal" tabindex="-1" aria-labelledby="courseFormModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="courseModalTitle"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="courseForm" novalidate>
                        <input type="hidden" id="courseId">
                        <div class="mb-3">
                            <label for="courseName" class="form-label">نام درس</label>
                            <input type="text" class="form-control" id="courseName" required>
                            <div class="invalid-feedback">لطفاً نام درس را وارد کنید.</div>
                        </div>
                        <div class="mb-3">
                            <label for="courseCode" class="form-label">کد درس</label>
                            <input type="number" class="form-control" id="courseCode" required>
                            <div class="invalid-feedback">لطفاً کد درس را وارد کنید.</div>
                        </div>
                        <div class="mb-3">
                            <label for="courseGroup" class="form-label">گروه</label>
                            <input type="number" class="form-control" id="courseGroup" required>
                            <div class="invalid-feedback">لطفاً گروه را وارد کنید.</div>
                        </div>
                        <div class="mb-3">
                            <label for="courseGroup" class="form-label">گروه</label>
                            <select class="form-select" id="department" required>
                                <option value="" disabled selected>انتخاب کنید...</option>
                                @if (Model.Departments is not null)
                                {
                                    foreach (var depatment in Model.Departments)
                                    {
                                        <option value="@depatment.Id">@depatment.Title</option>
                                    }
                                }
                            </select>
                            <div class="invalid-feedback">لطفاً گروه را وارد کنید.</div>
                        </div>
                    </form>
                </div>
                <div class="invalid-feedback fs-7 mb-1"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">انصراف</button>
                    <button type="button" id="saveCourseBtn" class="btn btn-danger"></button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="locationsListModal" tabindex="-1" aria-labelledby="locationsListModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-header-content">
                        <i class="fa-solid fa-map-location-dot m-1 fs-6"></i>
                        <span class="fs-6 m-1 w-100">لیست مکان‌ها</span>
                    </div>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <button id="addLocationBtn" class="btn w-100 submitCode text-center"><i class="fa-solid fa-plus ms-1"></i>افزودن مکان جدید</button>
                    <div class="table-responsive pt-3">
                        <table class="table table-striped table-hover">
                            <thead>
                                <tr class="text-center">
                                    <th scope="col">نام مکان</th>
                                    <th scope="col">آدرس</th>
                                    <th scope="col" class="text-center">عملیات</th>
                                </tr>
                            </thead>
                            <tbody id="locationsTableBody">
                                @if (Model.Locations is not null)
                                {
                                    foreach (var location in Model.Locations)
                                    {
                                        <tr data-location-id="@location.Id">
                                            <td>@location.Title</td>
                                            <td>@location.Address</td>
                                            <td class="text-center">
                                                <a href="#" class="text-primary mx-2 edit-btn" title="ویرایش"><i class="fa-solid fa-pen-to-square"></i></a>
                                                <a href="#" class="text-danger mx-2 delete-btn" title="حذف"><i class="fa-solid fa-trash-can"></i></a>
                                            </td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">بستن</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="locationFormModal" tabindex="-1" aria-labelledby="locationFormModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="locationModalTitle"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="locationForm" novalidate>
                        <input type="hidden" id="locationId">
                        <div class="mb-3">
                            <label for="locationName" class="form-label">نام مکان</label>
                            <input type="text" class="form-control" id="locationName" required>
                            <div class="invalid-feedback"> نام مکان را وارد کنید.</div>
                        </div>
                        <div class="mb-3">
                            <label for="locationAddress" class="form-label">آدرس</label>
                            <textarea class="form-control" id="locationAddress" rows="3" required></textarea>
                            <div class="invalid-feedback"> آدرس مکان را وارد کنید.</div>
                        </div>
                        <div class="mb-3">
                            <label for="locationMap" class="form-label">لینک گوگل مپ (اختیاری)</label>
                            <input type="url" class="form-control" id="locationMap">
                        </div>
                    </form>
                </div>
                <div class="invalid-feedback fs-7 mb-1"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">انصراف</button>
                    <button type="button" id="saveLocationBtn" class="btn btn-success"></button>
                </div>
            </div>
        </div>
    </div>
</section>
<section>
    @await Html.PartialAsync("_SupportWidgetPartial", Model.QuestionAndAnswers)
</section>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/html-to-image@1.11.11/dist/html-to-image.min.js"></script>